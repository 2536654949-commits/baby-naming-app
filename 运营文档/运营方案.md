# 运营方案

| 文档版本 | V1.0 |
|---------|------|
| 创建日期 | 2025-12-27 |
| 文档类型 | 运营规划文档 |

---

## 目录

1. [安全方案](#1-安全方案)
2. [商业模式](#2-商业模式)
3. [运营指标](#3-运营指标)
4. [版本规划](#4-版本规划)

---

## 1. 安全方案

### 1.1 安全威胁分析

| 威胁 | 风险等级 | 应对措施 |
|------|----------|----------|
| 授权码破解 | 高 | 复杂格式 + 设备绑定 + 限流 |
| API滥用 | 高 | JWT认证 + 次数限制 + IP限流 |
| 数据泄露 | 中 | HTTPS + 环境变量 + 数据加密 |
| XSS攻击 | 中 | 输入过滤 + CSP策略 |
| CSRF攻击 | 低 | SameSite Cookie + CSRF Token |

### 1.2 安全措施

#### 1.2.1 授权码安全

```javascript
// 授权码生成：使用加密随机数
import crypto from 'crypto';

function generateSecureCode(): string {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  const randomBytes = crypto.randomBytes(12);
  let code = 'BABY-';
  for (let i = 0; i < 12; i++) {
    if (i > 0 && i % 4 === 0) code += '-';
    const index = randomBytes[i] % chars.length;
    code += chars[index];
  }
  return code;
}

// 设备指纹生成
function generateDeviceId(): string {
  const ua = navigator.userAgent;
  const screen = `${screen.width}x${screen.height}`;
  const timestamp = Date.now();
  return crypto.createHash('sha256')
    .update(`${ua}:${screen}:${timestamp}`)
    .digest('hex')
    .substring(0, 32);
}
```

#### 1.2.2 API安全

```javascript
// 速率限制
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15分钟
  max: 100, // 每个IP最多100次请求
  message: '请求过于频繁，请稍后再试',
});

app.use('/api/', limiter);

// IP白名单（管理员）
const adminIpWhitelist = ['xxx.xxx.xxx.xxx'];
app.use('/api/admin/', (req, res, next) => {
  if (!adminIpWhitelist.includes(req.ip)) {
    return res.status(403).json({ error: '无权访问' });
  }
  next();
});
```

#### 1.2.3 环境变量管理

```bash
# .env (不要提交到Git)
DATABASE_URL="file:./dev.db"
JWT_SECRET="your-super-secret-key-change-this"
ZHIPU_API_KEY="df6c25571f064a608287189528e5e885.feKlyxfPVg2nvcj9"
ZHIPU_API_URL="https://open.bigmodel.cn/api/paas/v4/chat/completions"
ADMIN_PASSWORD_HASH="hash-of-admin-password"
```

### 1.3 数据隐私

**隐私政策要点**：
1. 仅收集必要信息：宝宝基本信息、设备标识
2. 不收集敏感个人信息
3. 数据存储期限：授权码过期后30天删除
4. 不与第三方共享数据
5. 用户可申请删除数据

---

## 2. 商业模式

### 2.1 定价策略

| 套餐 | 价格 | 次数 | 有效期 | 目标用户 |
|------|------|------|--------|----------|
| 基础版 | ¥29 | 5次 | 30天 | 预算有限用户 |
| 标准版 | ¥49 | 10次 | 60天 | 主推套餐 |
| 豪华版 | ¥99 | 30次 | 90天 | 多胞胎/反复选择 |

**定价逻辑**：
- 成本：智谱API约¥0.5/次
- 毛利：约85%
- 心理价位：50元左右用户易接受

### 2.2 销售渠道

```
线上渠道：
├── 微信公众号/小程序
├── 抖音/小红书推广
├── 亲子社群
└── 二维码直接售卖

线下渠道：
├── 母婴店合作
├── 产后修复中心
├── 月嫂公司
└── 亲子摄影机构
```

### 2.3 收入测算

**保守估计（月销100单）**：
```
标准版 ¥49 × 100单 = ¥4,900/月
API成本 ¥0.5 × 1000次 = ¥500/月
服务器成本 ¥100/月
净利润 = ¥4,300/月
```

**乐观估计（月销1000单）**：
```
标准版 ¥49 × 1000单 = ¥49,000/月
API成本 ¥0.5 × 10000次 = ¥5,000/月
服务器成本 ¥500/月
营销成本 ¥10,000/月
净利润 = ¥33,500/月
```

---

## 3. 运营指标

### 3.1 核心指标

| 指标 | 定义 | 目标值 |
|------|------|--------|
| 销售量 | 授权码激活数量 | 100/月起步 |
| 转化率 | 激活后完成起名的比例 | >80% |
| 满意度 | 用户满意程度 | >4.5/5 |
| 复购率 | 再次购买的比例 | >10% |
| 推荐率 | NPS用户推荐意愿 | >40 |

### 3.2 数据埋点

```javascript
// 埋点事件
const EVENTS = {
  // 页面访问
  PAGE_VIEW: 'page_view',

  // 授权流程
  AUTH_CODE_INPUT: 'auth_code_input',
  AUTH_ACTIVATE_CLICK: 'auth_activate_click',
  AUTH_SUCCESS: 'auth_success',
  AUTH_FAIL: 'auth_fail',

  // 起名流程
  FORM_SUBMIT: 'form_submit',
  NAME_GENERATE_START: 'name_generate_start',
  NAME_GENERATE_SUCCESS: 'name_generate_success',
  NAME_GENERATE_FAIL: 'name_generate_fail',

  // 结果查看
  RESULT_VIEW: 'result_view',
  DETAIL_VIEW: 'detail_view',
  FAVORITE_ADD: 'favorite_add',
  FAVORITE_REMOVE: 'favorite_remove',
};

// 发送埋点
function track(eventName: string, data?: any) {
  // 发送到分析平台（如神策、GrowingIO等）
  fetch('/api/analytics', {
    method: 'POST',
    body: JSON.stringify({
      event: eventName,
      data,
      timestamp: Date.now(),
      deviceId: getDeviceId(),
    }),
  });
}
```

### 3.3 漏斗分析

**用户转化漏斗**：
```
访问页面 → 输入授权码 → 激活成功 → 填写信息 → 生成名字 → 查看详情
   100%       80%          75%        70%       65%       50%
```

**关键优化点**：
1. 授权码输入页面：降低输入门槛，增加帮助提示
2. 激活流程：优化错误提示，提供客服联系方式
3. 信息填写：简化表单，提供智能默认值
4. 结果展示：突出优质名字，引导查看详情

---

## 4. 版本规划

### 4.1 V1.0 - MVP版本（3-4周）

**目标**：快速验证市场需求

**功能范围**：
- ✅ 授权码验证
- ✅ AI起名核心
- ✅ 结果展示
- ✅ 详情查看
- ✅ 本地收藏

**不包含**：
- ❌ 用户注册登录
- ❌ 历史记录
- ❌ 分享功能
- ❌ 管理后台

### 4.2 V1.5 - 增强版本（+2-3周）

**新增功能**：
- ✅ 历史记录查看
- ✅ 分享功能（生成海报）
- ✅ 名字对比功能
- ✅ 更多起名风格选择
- ✅ 简单管理后台

### 4.3 V2.0 - 完整版本（+3-4周）

**新增功能**：
- ✅ 用户账户系统
- ✅ 多种支付方式
- ✅ 社区交流
- ✅ 起名专家咨询
- ✅ 完善管理后台
- ✅ 数据分析看板

---

## 5. 开发排期

### 5.1 开发阶段

```
Week 1-2: 基础搭建
├── 前后端项目初始化
├── 数据库设计创建
├── 授权码系统开发
└── 授权页UI开发

Week 3: 核心功能
├── 智谱API集成
├── 起名表单开发
├── AI提示词优化
└── 结果页开发

Week 4: 完善优化
├── 详情页开发
├── 收藏功能
├── 错误处理
└── 测试修复

Week 5: 部署上线
├── 环境配置
├── 服务器部署
├── 生成测试授权码
└── 灰度测试
```

### 5.2 里程碑

| 里程碑 | 时间 | 交付物 |
|--------|------|--------|
| M1: 项目启动 | Day 1 | 需求确认、技术选型 |
| M2: 基础完成 | Day 7 | 授权系统可用 |
| M3: 功能完成 | Day 14 | 起名功能可用 |
| M4: 测试完成 | Day 18 | 测试通过 |
| M5: 正式上线 | Day 21 | 生产环境部署 |

---

## 6. 风险与应对

### 6.1 技术风险

| 风险 | 可能性 | 影响 | 应对 |
|------|--------|------|------|
| AI API不稳定 | 中 | 高 | 降级方案：预设名字库 |
| 智谱API涨价 | 中 | 中 | 监控成本，备选其他模型 |
| 并发量大 | 低 | 中 | 限流+队列 |

### 6.2 商业风险

| 风险 | 可能性 | 影响 | 应对 |
|------|--------|------|------|
| 销量不佳 | 中 | 高 | 多渠道推广、优化产品 |
| 授权码泄露 | 中 | 中 | 设备绑定+监控异常 |
| 用户不满意 | 低 | 高 | 收集反馈、持续优化 |

---

## 7. 成功标准

### 7.1 V1.0成功标准

- [ ] 按时完成开发（4周内）
- [ ] 功能完整可用，无严重Bug
- [ ] AI起名质量用户满意度>4/5
- [ ] 首月销售>50单
- [ ] 获得用户正面反馈

### 7.2 长期目标

- [ ] 3个月内月销达到500单
- [ ] 建立稳定的销售渠道
- [ ] 用户复购率>15%
- [ ] NPS>50
- [ ] 盈利稳定

---

**文档结束**
